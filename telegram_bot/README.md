# Telegram Bot для регистрации сотрудников OFS Global

Данный бот предназначен для регистрации сотрудников компании OFS Global через Telegram. Он интегрируется с основной системой компании через API и обеспечивает удобный интерфейс для процесса регистрации.

## Возможности

- Подача заявок на регистрацию сотрудников
- Административная панель для обработки заявок
- Валидация должностей через API
- Генерация одноразовых кодов приглашения
- Управление администраторами бота
- Статистика по регистрациям и действиям администраторов

## Требования

- Python 3.9 или выше
- Токен Telegram бота от @BotFather
- Доступ к API основной системы

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository_url>
cd ofs_global/telegram_bot
```

2. Создайте виртуальное окружение и активируйте его:
```bash
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/macOS
source venv/bin/activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` на основе `.env.example`:
```bash
cp .env.example .env
```

5. Отредактируйте файл `.env`, добавив необходимые параметры:
   - `BOT_TOKEN` - токен вашего Telegram бота
   - `ADMIN_IDS` - список Telegram ID администраторов (через запятую)
   - `API_URL` - URL API основной системы

## Запуск бота

```bash
python main.py
```

## Структура проекта

- `main.py` - Основной файл для запуска бота
- `config.py` - Конфигурация и загрузка переменных окружения
- `database.py` - Взаимодействие с базой данных SQLite
- `api_client.py` - Клиент для взаимодействия с API основной системы
- `registration_handlers.py` - Обработчики для регистрации сотрудников
- `admin_handlers.py` - Обработчики для административной панели
- `keyboards.py` - Клавиатуры для интерфейса бота
- `states.py` - Состояния для FSM (конечный автомат)

## Процесс регистрации

1. Пользователь начинает взаимодействие с ботом через команду `/start`
2. Заполняет необходимые данные для заявки на регистрацию
3. Администратор одобряет заявку и выбирает должность из списка
4. Генерируется уникальный код приглашения для выбранной должности
5. Пользователь вводит полученный код для завершения регистрации
6. Данные сотрудника сохраняются в локальной БД и отправляются в основную систему через API

## Администрирование

Доступ к административной панели имеют только пользователи, указанные в переменной `ADMIN_IDS`.

Для входа в панель администратора используйте команду `/admin`.

### Функции администратора:

- Просмотр и обработка заявок на регистрацию
- Просмотр статистики
- Управление списком администраторов (только для супер-админов)
- Просмотр списка зарегистрированных сотрудников

## Примечания по безопасности

- Все коды приглашения имеют ограниченный срок действия (24 часа)
- Реализована защита от частых запросов (rate limiting)
- Пароли и конфиденциальные данные хранятся только в файле .env (не включается в репозиторий)

## Техническая поддержка

При возникновении вопросов или проблем обращайтесь в технический отдел OFS Global или к разработчикам системы. 