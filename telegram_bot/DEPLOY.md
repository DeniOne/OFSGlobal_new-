# Инструкция по развертыванию телеграм-бота

## Требования
- Windows 10 или выше
- Python 3.8 или выше
- NSSM (Non-Sucking Service Manager)
- Права администратора

## Подготовка

1. Установите Python 3.8 или выше с официального сайта: https://www.python.org/downloads/
2. Скачайте NSSM с официального сайта: https://nssm.cc/download
3. Распакуйте NSSM и добавьте путь к его директории в переменную PATH

## Развертывание

1. Откройте PowerShell от имени администратора
2. Перейдите в директорию с ботом:
   ```powershell
   cd path/to/telegram_bot
   ```
3. Запустите скрипт развертывания:
   ```powershell
   .\deploy.ps1
   ```
4. Отредактируйте файл `.env`:
   - Добавьте токен вашего бота в `BOT_TOKEN`
   - Добавьте ID администраторов в `ADMIN_IDS` (через запятую)
   - При необходимости измените путь к хранилищу в `STORAGE_PATH`

## Управление ботом

### Запуск бота
```powershell
Start-Service TelegramBot
```

### Остановка бота
```powershell
Stop-Service TelegramBot
```

### Просмотр статуса
```powershell
Get-Service TelegramBot
```

### Просмотр логов
Логи доступны в директории `./data/logs`

## Устранение неполадок

1. Если бот не запускается:
   - Проверьте наличие файла `.env` и корректность настроек
   - Проверьте права доступа к директории с данными
   - Проверьте логи в `./data/logs`

2. Если служба не создается:
   - Убедитесь, что NSSM установлен и доступен в PATH
   - Проверьте права администратора
   - Проверьте корректность пути к Python

3. Если возникают проблемы с зависимостями:
   - Активируйте виртуальное окружение: `.\venv\Scripts\Activate.ps1`
   - Переустановите зависимости: `pip install -r requirements.txt`

## Обновление бота

1. Остановите службу:
   ```powershell
   Stop-Service TelegramBot
   ```

2. Обновите код бота

3. Активируйте виртуальное окружение и обновите зависимости:
   ```powershell
   .\venv\Scripts\Activate.ps1
   pip install -r requirements.txt
   ```

4. Запустите службу:
   ```powershell
   Start-Service TelegramBot
   ``` 