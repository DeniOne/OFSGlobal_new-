# Чеклист для аудита и миграции API эндпоинтов

## Инструкция по использованию

1. Сначала заполните **Аудит эндпоинтов** для всех существующих эндпоинтов в `full_api.py`
2. Затем, для каждого эндпоинта, отмечайте прогресс в разделе **Статус миграции**
3. Используйте поле **Заметки** для указания важных особенностей или проблем

## Статус миграции базы данных

- [x] База данных мигрирована из SQLite в PostgreSQL
- [x] Структура таблиц создана через Alembic миграции
- [x] Данные перенесены в PostgreSQL
- **Заметки**: Обнаружена рабочая PostgreSQL база `ofs_db_new` с 20 таблицами, содержащая все необходимые таблицы согласно плану миграции. Версия Alembic: `095344ece7d9`. Настроены все внешние ключи и последовательности.

## Пример заполнения

```
### Эндпоинт: GET /organizations/
- [x] Аудит проведен
- [x] Определен приоритет: Высокий
- [x] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [x] Бизнес-логика перенесена
- [x] Тесты написаны
- [x] Эндпоинт перенесен и работает
- **Заметки**: Проблема с кешированием запросов при большом объеме
```

## Организации (Organizations)

### Эндпоинт: GET /organizations/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: POST /organizations/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: GET /organizations/{organization_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: PUT /organizations/{organization_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: DELETE /organizations/{organization_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

## Подразделения (Divisions)

### Эндпоинт: GET /divisions/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: POST /divisions/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: GET /divisions/{division_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: PUT /divisions/{division_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: DELETE /divisions/{division_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

## Отделы (Sections)

### Эндпоинт: GET /sections/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: POST /sections/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: GET /sections/{section_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: PUT /sections/{section_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: DELETE /sections/{section_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

## Должности (Positions)

### Эндпоинт: GET /positions/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: POST /positions/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: GET /positions/{position_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: PUT /positions/{position_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: DELETE /positions/{position_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

## Сотрудники (Staff)

### Эндпоинт: GET /staff/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL. В БД уже есть 2 записи сотрудников.

### Эндпоинт: POST /staff/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: GET /staff/{staff_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: PUT /staff/{staff_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: DELETE /staff/{staff_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: GET /staff/by-position/{position_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

## Назначения сотрудников (Staff Positions)

### Эндпоинт: GET /staff-positions/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: POST /staff-positions/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: GET /staff-positions/{id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: PUT /staff-positions/{id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: DELETE /staff-positions/{id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

## Функции (Functions)

### Эндпоинт: GET /functions/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL. В БД уже есть 3 записи функций.

### Эндпоинт: POST /functions/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: GET /functions/{function_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: PUT /functions/{function_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: DELETE /functions/{function_id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

## Функциональные назначения (Functional Assignments)

### Эндпоинт: GET /functional-assignments/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: POST /functional-assignments/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: GET /functional-assignments/{id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: PUT /functional-assignments/{id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: DELETE /functional-assignments/{id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

## Иерархические связи (Hierarchy Relations)

### Эндпоинт: GET /hierarchy/hierarchy-relations/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL. В БД уже есть 5 записей иерархических связей.

### Эндпоинт: POST /hierarchy/hierarchy-relations/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: GET /hierarchy/hierarchy-relations/{id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: PUT /hierarchy/hierarchy-relations/{id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: DELETE /hierarchy/hierarchy-relations/{id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

## Управление подразделениями (Unit Management)

### Эндпоинт: GET /hierarchy/unit-management/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL. В БД уже есть 1 запись.

### Эндпоинт: POST /hierarchy/unit-management/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: GET /hierarchy/unit-management/{id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: PUT /hierarchy/unit-management/{id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

### Эндпоинт: DELETE /hierarchy/unit-management/{id}
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы уже создана и мигрирована в PostgreSQL

## Дерево организационной структуры (Org Tree)

### Эндпоинт: GET /org-tree/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Требуемые модели таблиц уже созданы и мигрированы в PostgreSQL.

## Аутентификация и авторизация

### Эндпоинт: POST /token
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы user уже создана и мигрирована в PostgreSQL. В БД уже есть 1 пользователь.

### Эндпоинт: POST /register
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы user уже создана и мигрирована в PostgreSQL.

### Эндпоинт: GET /users/me/
- [ ] Аудит проведен
- [ ] Определен приоритет: 
- [ ] Pydantic схемы перенесены
- [x] SQLAlchemy модели созданы
- [ ] Бизнес-логика перенесена
- [ ] Тесты написаны
- [ ] Эндпоинт перенесен и работает
- **Заметки**: Модель таблицы user уже создана и мигрирована в PostgreSQL.