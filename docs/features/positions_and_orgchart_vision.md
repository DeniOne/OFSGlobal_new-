# Концепция: Должности, Атрибуты и Оргсхема

Этот документ описывает согласованный подход к управлению должностями, их атрибутами и отображению в организационной структуре.

## Ключевые Принципы

1.  **Разделение Понятий:** Мы четко разделяем:
    *   **Должность (`Position`):** Сама роль в компании (название, описание).
    *   **Атрибут Должности (`attribute`):** Метка, определяющая **уровень доступа** и **важность/статус** должности (например, "Директор", "Рук. деп.", "Элемент"). Этот атрибут **не определяет** напрямую структурную подчиненность или принадлежность к подразделению в таблице `positions`.
    *   **Структурная Принадлежность (`division_id`, `section_id`):** Поля в таблице `positions`, указывающие "родной" департамент или отдел для должностей **ниже** уровня Директора/Учредителя. Для высших должностей эти поля **рекомендуется** оставлять `NULL`, но система не будет это жестко форсировать.
    *   **Функциональные Связи (`FunctionalRelation` - *реализуется отдельно*):** Механизм, который определяет **все** реальные связи: кто кому подчиняется, какая должность управляет каким департаментом/отделом/функцией. Именно эти связи будут основой для построения иерархии на оргсхеме.

2.  **Гибкость:** Система должна позволять описывать различные организационные структуры, включая матричные связи и ситуации, когда одна должность управляет несколькими подразделениями (это будет реализовано через `FunctionalRelation`).

3.  **Задел на Будущее:** Атрибуты должностей будут использоваться в дальнейшем для интеграции с ERP-системой для управления доступом к модулям и информации.

## Отображение на Оргсхеме

1.  **Построение Иерархии:** Граф оргсхемы будет строиться **на основе данных из `FunctionalRelation`** (связи подчинения Должность-Должность).
2.  **Группировка по Подразделениям:** Визуально должности могут группироваться по их `division_id` и `section_id` (если они указаны). Должности без этих ID (например, Гендир) будут отображаться на верхнем уровне или вне конкретных блоков подразделений.
3.  **Визуализация Атрибутов:** Атрибут должности может использоваться для визуального выделения узлов на схеме (например, разный цвет, форма или размер для "Директора", "Рук. деп." и "Элемента"), чтобы сразу был понятен уровень должности.
4.  **Фильтрация:** Пользователь сможет фильтровать оргсхему по Атрибутам (показать только "Руководителей отделов" и их подчиненных) или по подразделениям.
5.  **Отображение Связей Управления:** Связи типа "Должность управляет Департаментом" (из `FunctionalRelation`) также могут быть визуализированы на схеме, возможно, другим типом линии или иконкой.

## Итог

Такой подход позволяет иметь четкую и управляемую систему должностей, где Атрибут отвечает за доступ, поля `division_id`/`section_id` – за базовую структурную привязку (для не-топов), а вся сложная логика подчинения и управления вынесена в отдельную систему связей (`FunctionalRelation`), которая и будет основой для динамической и точной оргсхемы.